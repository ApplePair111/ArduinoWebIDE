<!DOCTYPE html>
<html>
  <body>
    <form id="gh-form" method="POST" action="https://github.com/ApplePair111/ArduinoWebIDE/actions/workflows/compile-arduino.yml/dispatches">
      <input type="hidden" name="ref" value="main" />
      <input type="hidden" name="inputs[sketch]" id="sketch" />
    </form>

    <script>
      window.addEventListener("message", (event) => {
        const sketch = event.data?.sketch;
        if (!sketch) return console.warn("No sketch provided");

        console.log("[ðŸ“¨] Received sketch via postMessage");
        document.getElementById("sketch").value = sketch;
        document.getElementById("gh-form").submit();
      });
    </script>
  </body>
</html>
